#!/bin/python3
# Added curses import to use KEY_ constants
import curses as c
import sys # For error logging

class Keybinds:
    """Defines common key codes for the application."""
    # Common keys
    BACKSPACE = [8, 127, c.KEY_BACKSPACE]
    DELETE = [330, c.KEY_DC] 
    ENTER = [10, 13, c.KEY_ENTER] # \n, \r, and curses KEY_ENTER
    ESCAPE = [27] # Escape key
    QUIT = [ord('q'), ord('Q'), ord('x'), ord('X')] # q, Q, x, X
    
    # Navigation/Scrolling
    UP = [c.KEY_UP, ord('k'), ord('K')]
    DOWN = [c.KEY_DOWN, ord('j'), ord('J')]
    LEFT = [c.KEY_LEFT, ord('h'), ord('H')]
    RIGHT = [c.KEY_RIGHT, ord('l'), ord('L')]
    
    # Edit/Toggle/Action
    EDIT = [ord('e'), ord('E')] # Open for editing (title/name)
    FLIP = [ord(' ')] # Space bar to flip status
    
    # List/Entry management
    ADD = [ord('a'), ord('A')] # Add new entry/list
    RENAME = [ord('n'), ord('N')] # Alias for EDIT
    DELETE_ITEM = [ord('d'), ord('D')] # Delete item


class Flairs:
    """Defines symbolic names for different entry types/states."""
    # Task Status Flairs (cycle order)
    tsk = "tsk" # Task (default/pending)
    suc = "suc" # Success (done)
    err = "err" # Error/Important
    gen = "gen" # General/Info
    
    # Non-cycling Flairs (for priority/display)
    inf = "inf" # Information (for list titles/status bar)
    prt = "prt" # Priority/Important Task

    # Order in which flairs cycle when using 'flip' (Spacebar)
    order = [tsk, suc, err, gen]


class FlairSymbols:
    """Maps flair names to visible symbols and color pairs."""
    convert = {
        Flairs.tsk : "[ ] ", # Space inside brackets
        Flairs.suc : "[X] ",
        Flairs.err : "[!] ",
        Flairs.gen : "[-] ",
        Flairs.inf : "[i] ",
        Flairs.prt : "[*] "
    }
    
    # Color pair IDs (must match curses init_pair IDs in App.py)
    # The IDs are arbitrary but must be consistent.
    COLOR_ID = {
        Flairs.tsk: 1,
        Flairs.suc: 2,
        Flairs.err: 3,
        Flairs.gen: 4,
        Flairs.inf: 5, # For list headers/Status bar
        Flairs.prt: 6
    }
